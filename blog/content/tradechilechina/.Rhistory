end.v <- which(text.v == "orphan.")
start.metadata.v <- text.v[1:start.v -1]
end.metadata.v <- text.v[(end.v+1):length(text.v)]
metadata.v <- c(start.metadata.v, end.metadata.v)
novel.lines.v <-  text.v[start.v:end.v]
novel.v <- paste(novel.lines.v, collapse=" ")
novel.lower.v <- tolower(novel.v)
moby.words.l <- strsplit(novel.lower.v, "\\W")
moby.word.v <- unlist(moby.words.l)
not.blanks.v  <-  which(moby.word.v!="")
moby.word.v <-  moby.word.v[not.blanks.v]
whale.hits.v <- length(moby.word.v[which(moby.word.v=="whale")])
total.words.v <- length(moby.word.v)
moby.freqs.t <- table(moby.word.v)
sorted.moby.freqs.t <- sort(moby.freqs.t , decreasing=T)
sorted.moby.freqs.t
text.v <- scan("data/plainText/melville.txt", what="character", sep="\n")
start.v <- which(text.v == "CHAPTER 1. Loomings.")
end.v <- which(text.v == "orphan.")
novel.lines.v <-  text.v[start.v:end.v]
novel.v <- paste(novel.lines.v, collapse=" ")
novel.lower.v <- tolower(novel.v)
moby.words.l <- strsplit(novel.lower.v, "\\W")
moby.word.v <- unlist(moby.words.l)
not.blanks.v  <-  which(moby.word.v!="")
moby.word.v <-  moby.word.v[not.blanks.v]
moby.word.v
text.v <- scan("data/plainText/melville.txt", what="character", sep="\n")
start.v <- which(text.v == "CHAPTER 1. Loomings.")
end.v <- which(text.v == "orphan.")
novel.lines.v <-  text.v[start.v:end.v]
novel.lines.v <- unlist(novel.lines.v)
chap.positions.v <- grep("^CHAPTER \\d", novel.lines.v)
last.position.v <-  length(novel.lines.v)
chap.positions.v  <-  c(chap.positions.v , last.position.v)
chapter.freqs.l <- list()
chapter.raws.l <- list()
for(i in 1:length(chap.positions.v)){
if(i != length(chap.positions.v)){
chapter.title <- novel.lines.v[chap.positions.v[i]]
start <- chap.positions.v[i]+1
end <- chap.positions.v[i+1]-1
chapter.lines.v <- novel.lines.v[start:end]
chapter.words.v <- tolower(paste(chapter.lines.v, collapse=" "))
chapter.words.l <- strsplit(chapter.words.v, "\\W")
chapter.word.v <- unlist(chapter.words.l)
chapter.word.v <- chapter.word.v[which(chapter.word.v!="")]
chapter.freqs.t <- table(chapter.word.v)
chapter.raws.l[[chapter.title]] <-  chapter.freqs.t
chapter.freqs.t.rel <- 100*(chapter.freqs.t/sum(chapter.freqs.t))
chapter.freqs.l[[chapter.title]] <- chapter.freqs.t.rel
}
}
whale.l <- lapply(chapter.freqs.l, '[', 'whale')
whales.m <- do.call(rbind, whale.l)
ahab.l <- lapply(chapter.freqs.l, '[', 'ahab')
ahabs.m <- do.call(rbind, ahab.l)
whales.v <- as.vector(whales.m[,1])
ahabs.v <- as.vector(ahabs.m[,1])
whales.ahabs.m <- cbind(whales.v, ahabs.v)
colnames(whales.ahabs.m) <- c("whale", "ahab")
colnames(whales.ahabs.m)
text.v <- scan("data/plainText/melville.txt", what="character", sep="\n")
start.v <- which(text.v == "CHAPTER 1. Loomings.")
end.v <- which(text.v == "orphan.")
novel.lines.v <-  text.v[start.v:end.v]
novel.lines.v <- unlist(novel.lines.v)
chap.positions.v <- grep("^CHAPTER \\d", novel.lines.v)
last.position.v <-  length(novel.lines.v)
chap.positions.v  <-  c(chap.positions.v , last.position.v)
chapter.freqs.l <- list()
chapter.raws.l <- list()
for(i in 1:length(chap.positions.v)){
if(i != length(chap.positions.v)){
chapter.title <- novel.lines.v[chap.positions.v[i]]
start <- chap.positions.v[i]+1
end <- chap.positions.v[i+1]-1
chapter.lines.v <- novel.lines.v[start:end]
chapter.words.v <- tolower(paste(chapter.lines.v, collapse=" "))
chapter.words.l <- strsplit(chapter.words.v, "\\W")
chapter.word.v <- unlist(chapter.words.l)
chapter.word.v <- chapter.word.v[which(chapter.word.v!="")]
chapter.freqs.t <- table(chapter.word.v)
chapter.raws.l[[chapter.title]] <-  chapter.freqs.t
chapter.freqs.t.rel <- 100*(chapter.freqs.t/sum(chapter.freqs.t))
chapter.freqs.l[[chapter.title]] <- chapter.freqs.t.rel
}
}
text.v <- scan("data/plainText/melville.txt", what="character", sep="\n")
start.v <- which(text.v == "CHAPTER 1. Loomings.")
end.v <- which(text.v == "orphan.")
novel.lines.v <-  text.v[start.v:end.v]
novel.lines.v <- unlist(novel.lines.v)
chap.positions.v <- grep("^CHAPTER \\d", novel.lines.v)
last.position.v <-  length(novel.lines.v)
chap.positions.v  <-  c(chap.positions.v , last.position.v)
chapter.freqs.l <- list()
chapter.raws.l <- list()
for(i in 1:length(chap.positions.v)){
if(i != length(chap.positions.v)){
chapter.title <- novel.lines.v[chap.positions.v[i]]
start <- chap.positions.v[i]+1
end <- chap.positions.v[i+1]-1
chapter.lines.v <- novel.lines.v[start:end]
chapter.words.v <- tolower(paste(chapter.lines.v, collapse=" "))
chapter.words.l <- strsplit(chapter.words.v, "\\W")
chapter.word.v <- unlist(chapter.words.l)
chapter.word.v <- chapter.word.v[which(chapter.word.v!="")]
chapter.freqs.t <- table(chapter.word.v)
chapter.raws.l[[chapter.title]] <-  chapter.freqs.t
chapter.freqs.t.rel <- 100*(chapter.freqs.t/sum(chapter.freqs.t))
chapter.freqs.l[[chapter.title]] <- chapter.freqs.t.rel
}
}
chapter.lengths.m <- do.call(rbind, lapply(chapter.raws.l,sum))
chapter.lengths.m
head(chapter.lengths.m.10)
head(chapter.lengths.m, 10)
head(novel.lines.v, 10)
library(OEC)
country_data("chl", "chn", "2013")
View(chl_chn_2013_imp_exp_6char)
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
library(OEC)
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
country_data("chl", "chn", "2013")
library(OEC)
country_data("chl", "chn", "2013")
View(chl_chn_2013_imp_exp_6char)
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
#setwd("/myfolder")
library(OEC)
country_data("chl", "chn", "2013")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
country_data("chl", "chn", "2013")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
country_data("chl", "chn", "2013")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
country_data("chl", "chn", "2013")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
View(chl_chn_2013_imp_exp_6char)
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
getwd()
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
View(chl_chn_2013_imp_exp_6char)
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("'", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("'", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
getwd()
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0(" ", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0(" ", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("HS-06 ", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("HS-08", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("HS-06 ", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("HS-08", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("\"HS-06\" ", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("HS-08", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("	 ", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("	 ", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("	 ", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("	 ", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("\u2000", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
system("R CMD Rd2pdf /Users/pacha/OEC")
library(OEC)
system("R CMD Rd2pdf /Users/pacha/OEC")
system("R CMD Rd2pdf /Users/pacha/OEC")
library(OEC)
system("R CMD Rd2pdf /Users/pacha/OEC")
library(OEC)
library(OEC)
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
country_data("chl", "chn", "2013")
chl_all_2013_imp_exp_6char$product_id <- sapply(chl_all_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
chl_all_2013_imp_exp_8char$product_id <- sapply(chl_all_2013_imp_exp_8char$product_id, function(x) paste0("\u2000", x))
write.csv(chl_all_2013_imp_exp_6char, "chl_all_2013_imp_exp_6char.csv")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
country_data("chl", "chn", "2013")
chn_chn_2013_imp_exp_6char$product_id <- sapply(chn_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
chn_chn_2013_imp_exp_8char$product_id <- sapply(chn_chn_2013_imp_exp_8char$product_id, function(x) paste0("\u2000", x))
write.csv(chn_chn_2013_imp_exp_6char, "chn_chn_2013_imp_exp_6char.csv")
tree_map("chn_chn_2013_imp_exp_6char", "exports", "chn_chn_2013_exp_6char_nongrouped", "no")
tree_map("chn_chn_2013_imp_exp_6char", "exports", "chn_chn_2013_exp_6char_grouped", "yes")
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
country_data("chl", "chn", "2013")
chn_chn_2013_imp_exp_6char$product_id <- sapply(chn_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
View(chl_chn_2013_imp_exp_6char)
View(chl_chn_2013_imp_exp_6char)
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("\u2000", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("\u2000", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
library(OEC)
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_nongrouped", "no")
tree_map("chl_all_2013_imp_exp_6char", "exports", "chl_all_2013_exp_6char_grouped", "yes")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
setwd("/Users/pacha/test")
library(OEC)
copy_examples()
copy_d3()
country_data("chl", "chn", "2013")
chl_chn_2013_imp_exp_6char$product_id <- sapply(chl_chn_2013_imp_exp_6char$product_id, function(x) paste0("\u2000", x))
chl_chn_2013_imp_exp_8char$product_id <- sapply(chl_chn_2013_imp_exp_8char$product_id, function(x) paste0("\u2000", x))
write.csv(chl_chn_2013_imp_exp_6char, "chl_chn_2013_imp_exp_6char.csv")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_nongrouped", "no")
tree_map("chl_chn_2013_imp_exp_6char", "exports", "chl_chn_2013_exp_6char_grouped", "yes")
setwd("/Users/pacha/pachamaltese.github.io/blog/content/tradechilechina/")
library(XLConnect)
library(rCharts)
library(ggplot2)
library(grid)
library(gridExtra)
library(RColorBrewer)
library(scales)
library(plyr)
library(cowplot)
file <- paste0(getwd(),"/datos-TLC-Chile-China.xlsx")
data2 <- readWorksheetFromFile(file, sheet = "Sheet1", region = "A16:F25", header = TRUE)
data2 <- as.data.frame(data2)
g15 <- ggplot() + geom_line(aes(y = bccc, x = anio, colour = "bccc"), size=1.5, data = data2, stat="identity") + geom_line(aes(y = bcceeuu, x = anio, colour = "bcceeuu"), size=1.5, data = data2, stat="identity") + geom_line(aes(y = bccue, x = anio, colour = "bccue"), size=1.5, data = data2, stat="identity")
g15 <- g15 + ylab("Millones de USD") + xlab("Año") + scale_x_continuous(breaks=seq(2000,2014,2)) + scale_y_continuous(breaks=seq(-10000,15000,5000)) + expand_limits(y=c(-10000,15000)) + theme(panel.background = element_rect(fill="white"), panel.grid = element_line(colour="white"))
g15 <- g15 + scale_color_manual(labels = c("Balanza Comercial con China (socio comercial #1)", "Balanza Comercial con EEUU (socio comercial #2)", "Balanza Comercial con UE (socio comercial #3)"), values = c("#4169e1", "#d68a59","#556b2f"))
g15 <- g15 + theme(legend.position="bottom", legend.direction="horizontal", legend.title = element_blank(), axis.line = element_line(size=1.5)) + ggtitle("Balanza Comercial con China, EEUU y UE") + theme(plot.title=element_text(size=20, family="OfficinaSanITC-Book"), text=element_text(size=18, family="OfficinaSanITC-Book")) + guides(col = guide_legend(nrow = 3))
g15
g15 <- ggplot() +
geom_line(aes(y = bccc, x = anio, colour = "bccc"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bcceeuu, x = anio, colour = "bcceeuu"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bccue, x = anio, colour = "bccue"), size=1.5, data = data2, stat="identity")
g15
setwd("/Users/pacha/pachamaltese.github.io/blog/content/tradechilechina/")
library(XLConnect)
library(rCharts)
library(ggplot2)
library(grid)
library(gridExtra)
library(RColorBrewer)
library(scales)
library(plyr)
library(cowplot)
file <- paste0(getwd(),"/datos-TLC-Chile-China.xlsx")
data2 <- readWorksheetFromFile(file, sheet = "Sheet1", region = "A16:F25", header = TRUE)
data2 <- as.data.frame(data2)
View(data2)
g15 <- ggplot() +
geom_line(aes(y = bccc, x = anio, colour = "bccc"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bcceeuu, x = anio, colour = "bcceeuu"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bccue, x = anio, colour = "bccue"), size=1.5, data = data2, stat="identity")
g15
g15 <- ggplot() +
geom_line(aes(y = bccc, x = anio, colour = "bccc"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bcceeuu, x = anio, colour = "bcceeuu"), size=1.5, data = data2, stat="identity")
g15
g15 <- ggplot() + theme_bw()
geom_line(aes(y = bccc, x = anio, colour = "bccc"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bcceeuu, x = anio, colour = "bcceeuu"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bccue, x = anio, colour = "bccue"), size=1.5, data = data2, stat="identity")
g15 <- ggplot() + theme_bw() +
geom_line(aes(y = bccc, x = anio, colour = "bccc"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bcceeuu, x = anio, colour = "bcceeuu"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bccue, x = anio, colour = "bccue"), size=1.5, data = data2, stat="identity")
g15
g15 <- ggplot() + theme_bw() +
geom_line(aes(y = bccc, x = anio, colour = "bccc"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bcceeuu, x = anio, colour = "bcceeuu"), size=1.5, data = data2, stat="identity") +
geom_line(aes(y = bccue, x = anio, colour = "bccue"), size=1.5, data = data2, stat="identity")
g15 <- g15 +
ylab("Millones de USD") +
xlab("Año") +
scale_x_continuous(breaks=seq(2000,2014,2)) +
scale_y_continuous(breaks=seq(-10000,15000,5000)) +
expand_limits(y=c(-10000,15000)) +
theme(panel.background = element_rect(fill="white"), panel.grid = element_line(colour="white"))
g15 <- g15 +
scale_color_manual(labels = c("Balanza Comercial con China (socio comercial #1)", "Balanza Comercial con EEUU (socio comercial #2)", "Balanza Comercial con UE (socio comercial #3)"), values = c("#4169e1", "#d68a59","#556b2f"))
g15 <- g15 +
theme(legend.position="bottom", legend.direction="horizontal", legend.title = element_blank(), axis.line = element_line(size=1.5)) +
ggtitle("Balanza Comercial con China, EEUU y UE") +
theme(plot.title=element_text(size=20, family="OfficinaSanITC-Book"), text=element_text(size=18, family="OfficinaSanITC-Book")) +
guides(col = guide_legend(nrow = 3))
g15
